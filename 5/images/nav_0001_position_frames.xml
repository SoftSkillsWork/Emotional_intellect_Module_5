<?xml version="1.0" encoding="utf-8"?>
<!--
'*    nav_0001_position_frames.xml
-->
<params>
    <object>
        <format>2.0</format>
        <label>Указатель позиции по кадрам</label>
        <description>Указатель позиции по кадрам</description>
        <width>200</width>
        <height>20</height>
        <state_extension>false</state_extension>
    </object>
    <page name="Основные" w="320" h="150">
        <param type="label" id="" text="Текст" def="" x="10" y="10" w="120" h="13"/>
        <param type="edit" id="position_text" text="" def="ПОЗИЦИЯ:" x="130" y="8" w="180" h="13"/>
        <param type="label" id="" text="Разделитель" def="" x="10" y="26" w="120" h="13"/>
        <param type="edit" id="position_divider" text="" def="/" x="130" y="24" w="180" h="13"/>
        <param type="line" id="LINE_font_1" text="" def="" x="5" y="46" w="310" h="94"/>
        <param type="line" id="LINE_font_2" text="" def="" x="5" y="62" w="310" h="78"/>
        <param type="label" id="lab_font" text="Шрифт" def="" x="15" y="50" w="120" h="11"/>
        <param type="select" id="font" text="" def="robotoblack" x="15" y="70" w="113" h="13">
            <items>
                <item id="Arial" label="Arial">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="ArialBlack" label="Arial Black">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="ArialNarrow" label="Arial Narrow">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="ComicSansMS" label="Comic Sans MS">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="CourierNew" label="Courier New">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="Georgia" label="Georgia">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="Impact" label="Impact">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="LucidaConsole" label="Lucida Console">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="LucidaSansUnicode" label="Lucida Sans Unicode">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="Palatino" label="Palatino">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="Tahoma" label="Tahoma">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="Times" label="Times New Roman">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="TrebuchetMS" label="Trebuchet MS">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="Verdana" label="Verdana">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="clear_sans_lightregular" label="WF Clear Sans Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="clear_sans_mediumregular" label="WF Clear Sans Medium">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="clear_sansregular" label="WF Clear Sans Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="clear_sans_thinregular" label="WF Clear Sans Thin">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="droid_sans_monoregular" label="WF Droid Sans Mono">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="droid_sansregular" label="WF Droid Sans Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="droid_serifregular" label="WF Droid Serif Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="nerisblack" label="WF Neris Black">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="nerislight" label="WF Neris Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="nerissemibold" label="WF Neris SemiBold">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="neristhin" label="WF Neris Thin">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="noto_sansregular" label="WF Noto Sans Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="noto_serifregular" label="WF Noto Serif Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="open_sanscondensed_light" label="WF Open Sans Condensed Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="open_sansextrabold" label="WF Open Sans Extra Bold">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="open_sanslight" label="WF Open Sans Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="open_sansregular" label="WF Open Sans Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="open_sanssemibold" label="WF Open Sans SemiBold">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="permiansanstypefaceregular" label="WF Permian Sans Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="permianseriftypefaceregular" label="WF Permian Serif Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="permianslabseriftypefaceRg" label="WF Permian Slab Serif Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="robotoblack" label="WF Roboto Black">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="roboto_condensedregular" label="WF Roboto Condensed">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="roboto_condensedlight" label="WF Roboto Condensed Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="robotolight" label="WF Roboto Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="robotomedium" label="WF Roboto Medium">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="robotoregular" label="WF Roboto Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="robotothin" label="WF Roboto Thin">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="roboto_slablight" label="WF Roboto Slab Light">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="roboto_slabregular" label="WF Roboto Slab Regular">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="roboto_slabthin" label="WF Roboto Slab Thin">
                    <events>
                        <event name="selendok" target="font_custom" action="disable"/>
                    </events>
                </item>
                <item id="custom" label="По выбору">
                    <events>
                        <event name="selendok" target="font_custom" action="enable"/>
                    </events>
                </item>
            </items>
        </param>
        <param type="edit" id="font_custom" text="" def="" x="130" y="70" w="175" h="13"/>
        <param type="label" id="lab_font_style" text="Стиль, размер" def="" x="15" y="88" w="115" h="11"/>
        <param type="select" id="font_style" text="" def="normal" x="130" y="86" w="118" h="13">
            <items>
                <item id="normal" label="Обычный"/>
                <item id="bold" label="Жирный"/>
                <item id="italic" label="Курсив"/>
                <item id="bolditalic" label="Курсив жирный"/>
            </items>
        </param>
        <param type="spinner" id="font_size" text="" def="14" x="250" y="86" w="32" h="13" max="100" min="1" delta="1"/>
        <param type="label" id="lab_font_size2" text="пкс" def="" x="285" y="88" w="25" h="11"/>
        <param type="label" id="lab_text_shadow_strength" text="Тень" def="" x="15" y="104" w="115" h="11"/>
        <param type="select" id="text_shadow_strength" text="" def="normal" x="130" y="102" w="118" h="13">
            <items>
                <item id="none" label="Без тени">
                    <events>
                        <event name="selendok" target="text_shadow_color" action="disable"/>
                    </events>
                </item>
                <item id="extralight" label="Очень слабая">
                    <events>
                        <event name="selendok" target="text_shadow_color" action="enable"/>
                    </events>
                </item>
                <item id="light" label="Слабая">
                    <events>
                        <event name="selendok" target="text_shadow_color" action="enable"/>
                    </events>
                </item>
                <item id="normal" label="Нормальная">
                    <events>
                        <event name="selendok" target="text_shadow_color" action="enable"/>
                    </events>
                </item>
                <item id="dark" label="Интенсивная">
                    <events>
                        <event name="selendok" target="text_shadow_color" action="enable"/>
                    </events>
                </item>
                <item id="extradark" label="Очень интенсивная">
                    <events>
                        <event name="selendok" target="text_shadow_color" action="enable"/>
                    </events>
                </item>
            </items>
        </param>
        <param type="color" id="text_shadow_color" text="" def="#FFFFFF" x="250" y="102" w="40" h="13"/>
        <param type="label" id="lab_font_color" text="Цвет" def="" x="15" y="120" w="115" h="11"/>
        <param type="color" id="font_color" text="" def="#004080" x="130" y="118" w="40" h="13"/>
    </page>
        <methods>
            <method name="Constructor" label="Constructor" access="private">
                <params>
                </params>
                <body>
                <![CDATA[function Constructor(argobj)
            {
                CLO[argobj.pid].data = { sFrameId: "", iFrameNum: 0 };
                var aPath = CL.axSlides.children('frames').children();
                $(CLO[argobj.pid].div).find(".cl-total-frame").html(aPath.length);
                CL.Event.Subscribe({ aList: [ { sId: argobj.pid, sEvtName: "EVENT_SLIDE_OPENED" },{ sId: argobj.pid, sEvtName: "EVENT_FRAME_OPENED" }  ] });
                return true;
            }                                                                                                                                                                                                                                                                                                                                                                                                                                ]]>
                </body>
            </method>
            <method name="HandleEvt" label="HandleEvt" access="private">
                <params>
                </params>
                <body>
                <![CDATA[function HandleEvt(oEvtHandler)
            {
                if(CLO[argobj.pid]==null || CLO[argobj.pid].div==null) return false; 
                switch(argobj.evt)
                {
                    case "EVENT_SLIDE_OPENED":
                    {
                        if(CLO[argobj.pid].data.sFrameId!=CLZ.sCurrentFrameId)
                        {
                            var FramesTotal = CL.axSlides.children('frames').children().length;
                            var aPath=[];
                            for (var i = 0; i < FramesTotal; i++)
                            {
                                aPath[i] = CL.axSlides.children('frames').children()[i].getAttribute("id");
                                if (aPath[i]==CLZ.sCurrentFrameId)
                                {
                                    var iIdx = i+1;
                                }
                            }
                            /*var aPath = CL.axSlides.children('frames').children();*/
                            /*var iIdx = $.inArray(CLZ.sCurrentFrameId, aPath) + 1;*/
                            CLO[argobj.pid].data.sFrameId = CLZ.sCurrentFrameId;
                            CLO[argobj.pid].data.iFrameNum = iIdx;
                            $(CLO[argobj.pid].div).find(".cl-value-frame").html(iIdx);
                        }
                        break;
                    }
                    case "EVENT_FRAME_OPENED":
                    {
                        if(CLO[argobj.pid].data.sFrameId!=CLZ.sCurrentFrameId)
                        {
                            var FramesTotal = CL.axSlides.children('frames').children().length;
                            var aPath=[];
                            for (var i = 0; i < FramesTotal; i++)
                            {
                                aPath[i] = CL.axSlides.children('frames').children()[i].getAttribute("id");
                                if (aPath[i]==CLZ.sCurrentFrameId)
                                {
                                    var iIdx = i+1;
                                }
                            }
                            /*var aPath = CL.axSlides.children('frames').children();*/
                            /*var iIdx = $.inArray(CLZ.sCurrentFrameId, aPath) + 1;*/
                            CLO[argobj.pid].data.sFrameId = CLZ.sCurrentFrameId;
                            CLO[argobj.pid].data.iFrameNum = iIdx;
                            $(CLO[argobj.pid].div).find(".cl-value-frame").html(iIdx);
                        }
                        break;
                    }
                }
                return true;
            }                                                                                                                                                                                                                                                                                                                                                                                                                                ]]>
                </body>
            </method>
            <method name="GetProperty" label="GetProperty" access="private">
                <params>
                </params>
                <body>
                <![CDATA[function GetProperty(argobj)
            {
                if(argobj.pid==null || argobj.property==null) return false;
                if(CLO[argobj.pid]==null) return false;
                switch(argobj.property.toLowerCase())
                {
                    case "currentposition": 
                    {
                        return CLO[argobj.pid].data.iFrameNum;
                    }
                }
                return true;
            }                                                                                                                                                                                                                                                                                                                                                                                                                                ]]>
                </body>
            </method>
        </methods>
</params>
